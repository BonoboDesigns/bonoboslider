/*! buddypress - v2.1.0 - 2014-10-06 9:39:07 PM UTC - https://wordpress.org/plugins/buddypress/ */
function bp_init_activity(){jq.cookie("bp-activity-oldestpage",1,{path:"/"});if(null!=jq.cookie("bp-activity-filter")&&jq("#activity-filter-select").length)jq('#activity-filter-select select option[value="'+jq.cookie("bp-activity-filter")+'"]').prop("selected",true);if(null!=jq.cookie("bp-activity-scope")&&jq(".activity-type-tabs").length){jq(".activity-type-tabs li").each(function(){jq(this).removeClass("selected")});jq("li#activity-"+jq.cookie("bp-activity-scope")+", .item-list-tabs li.current").addClass("selected")}}function bp_init_objects(e){jq(e).each(function(t){if(null!=jq.cookie("bp-"+e[t]+"-filter")&&jq("li#"+e[t]+"-order-select select").length)jq("li#"+e[t]+'-order-select select option[value="'+jq.cookie("bp-"+e[t]+"-filter")+'"]').prop("selected",true);if(null!=jq.cookie("bp-"+e[t]+"-scope")&&jq("div."+e[t]).length){jq(".item-list-tabs li").each(function(){jq(this).removeClass("selected")});jq(".item-list-tabs li#"+e[t]+"-"+jq.cookie("bp-"+e[t]+"-scope")+", div.item-list-tabs#object-nav li.current").addClass("selected")}})}function bp_filter_request(e,t,n,r,i,s,o,u){if("activity"==e)return false;if(bp_get_querystring("s")&&!i)i=bp_get_querystring("s");if(null==n)n="all";jq.cookie("bp-"+e+"-scope",n,{path:"/"});jq.cookie("bp-"+e+"-filter",t,{path:"/"});jq.cookie("bp-"+e+"-extras",o,{path:"/"});jq(".item-list-tabs li").each(function(){jq(this).removeClass("selected")});jq(".item-list-tabs li#"+e+"-"+n+", .item-list-tabs#object-nav li.current").addClass("selected");jq(".item-list-tabs li.selected").addClass("loading");jq('.item-list-tabs select option[value="'+t+'"]').prop("selected",true);if("friends"==e)e="members";if(bp_ajax_request)bp_ajax_request.abort();bp_ajax_request=jq.post(ajaxurl,{action:e+"_filter",cookie:bp_get_cookies(),object:e,filter:t,search_terms:i,scope:n,page:s,extras:o},function(e){if(u=="pag-bottom"&&jq("#subnav").length){var t=jq("#subnav").parent();jq("html,body").animate({scrollTop:t.offset().top},"slow",function(){jq(r).fadeOut(100,function(){jq(this).html(e);jq(this).fadeIn(100)})})}else{jq(r).fadeOut(100,function(){jq(this).html(e);jq(this).fadeIn(100)})}jq(".item-list-tabs li.selected").removeClass("loading")})}function bp_activity_request(e,t){jq.cookie("bp-activity-scope",e,{path:"/"});jq.cookie("bp-activity-filter",t,{path:"/"});jq.cookie("bp-activity-oldestpage",1,{path:"/"});jq(".item-list-tabs li").each(function(){jq(this).removeClass("selected loading")});jq("li#activity-"+e+", .item-list-tabs li.current").addClass("selected");jq("#object-nav.item-list-tabs li.selected, div.activity-type-tabs li.selected").addClass("loading");jq('#activity-filter-select select option[value="'+t+'"]').prop("selected",true);jq(".widget_bp_activity_widget h2 span.ajax-loader").show();if(bp_ajax_request)bp_ajax_request.abort();bp_ajax_request=jq.post(ajaxurl,{action:"activity_widget_filter",cookie:bp_get_cookies(),_wpnonce_activity_filter:jq("input#_wpnonce_activity_filter").val(),scope:e,filter:t},function(e){jq(".widget_bp_activity_widget h2 span.ajax-loader").hide();jq("div.activity").fadeOut(100,function(){jq(this).html(e.contents);jq(this).fadeIn(100);bp_dtheme_hide_comments()});if(null!=e.feed_url)jq(".directory #subnav li.feed a, .home-page #subnav li.feed a").attr("href",e.feed_url);jq(".item-list-tabs li.selected").removeClass("loading")},"json")}function bp_dtheme_hide_comments(){var e=jq("div.activity-comments");if(!e.length)return false;e.each(function(){if(jq(this).children("ul").children("li").length<5)return;var e=jq(this);var t=e.parents("ul#activity-stream > li");var n=jq(this).children("ul").children("li");var r=" ";if(jq("li#"+t.attr("id")+" a.acomment-reply span").length)var r=jq("li#"+t.attr("id")+" a.acomment-reply span").html();n.each(function(e){if(e<n.length-5){jq(this).addClass("hidden");jq(this).toggle();if(!e)jq(this).before('<li class="show-all"><a href="#'+t.attr("id")+'/show-all/" title="'+BP_DTheme.show_all_comments+'">'+BP_DTheme.show_x_comments.replace("%d",r)+"</a></li>")}})})}function checkAll(){var e=document.getElementsByTagName("input");for(var t=0;t<e.length;t++){if(e[t].type=="checkbox"){if($("check_all").checked==""){e[t].checked=""}else{e[t].checked="checked"}}}}function clear(e){if(!document.getElementById(e))return;var e=document.getElementById(e);if(radioButtons=e.getElementsByTagName("INPUT")){for(var t=0;t<radioButtons.length;t++){radioButtons[t].checked=""}}if(options=e.getElementsByTagName("OPTION")){for(var t=0;t<options.length;t++){options[t].selected=false}}return}function bp_get_cookies(){var e=document.cookie.split(";");var t={};var n="bp-";for(var r=0;r<e.length;r++){var i=e[r];var s=i.indexOf("=");var o=jq.trim(unescape(i.slice(0,s)));var u=unescape(i.slice(s+1));if(o.indexOf(n)==0){t[o]=u}}return encodeURIComponent(jq.param(t))}var jq=jQuery;var bp_ajax_request=null;jq(document).ready(function(){if("-1"==window.location.search.indexOf("new")&&jq("div.forums").length)jq("#new-topic-post").hide();else jq("#new-topic-post").show();bp_init_activity();var e=["members","groups","blogs","forums"],t=jq("#whats-new");bp_init_objects(e);if(t.length&&bp_get_querystring("r")){var n=t.val();jq("#whats-new-options").animate({height:"40px"});t.animate({height:"50px"});jq.scrollTo(t,500,{offset:-125,easing:"swing"});t.val("").focus().val(n)}jq("#whats-new").focus(function(){jq(this).closest("#whats-new-form").addClass("show-me");jq("#aw-whats-new-submit").prop("disabled",false);var e=jq("form#whats-new-form");if(e.hasClass("submitted")){e.removeClass("submitted")}});jq("#whats-new").blur(function(){if(!this.value.match(/\S+/)){this.value="";jq("#aw-whats-new-submit").prop("disabled",true)}});jq("input#aw-whats-new-submit").click(function(){var e=jq(this);var t=e.closest("form#whats-new-form");t.children().each(function(){if(jq.nodeName(this,"textarea")||jq.nodeName(this,"input"))jq(this).prop("disabled",true)});jq("div.error").remove();e.addClass("loading");e.prop("disabled",true);t.addClass("submitted");var n="";var r=jq("#whats-new-post-in").val();var i=jq("textarea#whats-new").val();if(r>0){n=jq("#whats-new-post-object").val()}jq.post(ajaxurl,{action:"post_update",cookie:bp_get_cookies(),_wpnonce_post_update:jq("input#_wpnonce_post_update").val(),content:i,object:n,item_id:r,_bp_as_nonce:jq("#_bp_as_nonce").val()||""},function(e){t.children().each(function(){if(jq.nodeName(this,"textarea")||jq.nodeName(this,"input")){jq(this).prop("disabled",false)}});if(e[0]+e[1]=="-1"){t.prepend(e.substr(2,e.length));jq("form#"+t.attr("id")+" div.error").hide().fadeIn(200)}else{if(0==jq("ul.activity-list").length){jq("div.error").slideUp(100).remove();jq("div#message").slideUp(100).remove();jq("div.activity").append('<ul id="activity-stream" class="activity-list item-list">')}jq("ul#activity-stream").prepend(e);jq("ul#activity-stream li:first").addClass("new-update just-posted");if(0!=jq("#latest-update").length){var n=jq("ul#activity-stream li.new-update .activity-content .activity-inner p").html();var r=jq("ul#activity-stream li.new-update .activity-content .activity-header p a.view").attr("href");var i=jq("ul#activity-stream li.new-update .activity-content .activity-inner p").text();var s="";if(i!="")s=n+" ";s+='<a href="'+r+'" rel="nofollow">'+BP_DTheme.view+"</a>";jq("#latest-update").slideUp(300,function(){jq("#latest-update").html(s);jq("#latest-update").slideDown(300)})}jq("li.new-update").hide().slideDown(300);jq("li.new-update").removeClass("new-update");jq("textarea#whats-new").val("")}jq("#whats-new-options").animate({height:"0px"});jq("form#whats-new-form textarea").animate({height:"20px"});jq("#aw-whats-new-submit").prop("disabled",true).removeClass("loading")});return false});jq("div.activity-type-tabs").click(function(e){var t=jq(e.target).parent();if(e.target.nodeName=="STRONG"||e.target.nodeName=="SPAN")t=t.parent();else if(e.target.nodeName!="A")return false;jq.cookie("bp-activity-oldestpage",1,{path:"/"});var n=t.attr("id").substr(9,t.attr("id").length);var r=jq("#activity-filter-select select").val();if(n=="mentions")jq("li#"+t.attr("id")+" a strong").remove();bp_activity_request(n,r);return false});jq("#activity-filter-select select").change(function(){var e=jq("div.activity-type-tabs li.selected");if(!e.length)var t=null;else var t=e.attr("id").substr(9,e.attr("id").length);var n=jq(this).val();bp_activity_request(t,n);return false});jq("div.activity").click(function(e){var t=jq(e.target);if(t.hasClass("fav")||t.hasClass("unfav")){var n=t.hasClass("fav")?"fav":"unfav";var r=t.closest(".activity-item");var i=r.attr("id").substr(9,r.attr("id").length);t.addClass("loading");jq.post(ajaxurl,{action:"activity_mark_"+n,cookie:bp_get_cookies(),id:i},function(e){t.removeClass("loading");t.fadeOut(100,function(){jq(this).html(e);jq(this).attr("title","fav"==n?BP_DTheme.remove_fav:BP_DTheme.mark_as_fav);jq(this).fadeIn(100)});if("fav"==n){if(!jq(".item-list-tabs li#activity-favorites").length)jq(".item-list-tabs ul li#activity-mentions").before('<li id="activity-favorites"><a href="#">'+BP_DTheme.my_favs+" <span>0</span></a></li>");t.removeClass("fav");t.addClass("unfav");jq(".item-list-tabs ul li#activity-favorites span").html(Number(jq(".item-list-tabs ul li#activity-favorites span").html())+1)}else{t.removeClass("unfav");t.addClass("fav");jq(".item-list-tabs ul li#activity-favorites span").html(Number(jq(".item-list-tabs ul li#activity-favorites span").html())-1);if(!Number(jq(".item-list-tabs ul li#activity-favorites span").html())){if(jq(".item-list-tabs ul li#activity-favorites").hasClass("selected"))bp_activity_request(null,null);jq(".item-list-tabs ul li#activity-favorites").remove()}}if("activity-favorites"==jq(".item-list-tabs li.selected").attr("id"))t.parent().parent().parent().slideUp(100)});return false}if(t.hasClass("delete-activity")){var s=t.parents("div.activity ul li");var o=s.attr("id").substr(9,s.attr("id").length);var u=t.attr("href");var a=u.split("_wpnonce=");a=a[1];t.addClass("loading");jq.post(ajaxurl,{action:"delete_activity",cookie:bp_get_cookies(),id:o,_wpnonce:a},function(e){if(e[0]+e[1]=="-1"){s.prepend(e.substr(2,e.length));s.children("div#message").hide().fadeIn(300)}else{s.slideUp(300)}});return false}if(t.hasClass("spam-activity")){var s=t.parents("div.activity ul li");t.addClass("loading");jq.post(ajaxurl,{action:"bp_spam_activity",cookie:encodeURIComponent(document.cookie),id:s.attr("id").substr(9,s.attr("id").length),_wpnonce:t.attr("href").split("_wpnonce=")[1]},function(e){if(e[0]+e[1]==="-1"){s.prepend(e.substr(2,e.length));s.children("div#message").hide().fadeIn(300)}else{s.slideUp(300)}});return false}if(t.parent().hasClass("load-more")){jq("#content li.load-more").addClass("loading");if(null==jq.cookie("bp-activity-oldestpage"))jq.cookie("bp-activity-oldestpage",1,{path:"/"});var f=jq.cookie("bp-activity-oldestpage")*1+1;var l=[];jq(".activity-list li.just-posted").each(function(){l.push(jq(this).attr("id").replace("activity-",""))});jq.post(ajaxurl,{action:"activity_get_older_updates",cookie:bp_get_cookies(),page:f,exclude_just_posted:l.join(",")},function(e){jq("#content li.load-more").removeClass("loading");jq.cookie("bp-activity-oldestpage",f,{path:"/"});jq("#content ul.activity-list").append(e.contents);t.parent().hide()},"json");return false}});jq("div.activity").on("click",".activity-read-more a",function(e){var t=jq(e.target);var n=t.parent().attr("id").split("-");var r=n[3];var i=n[0];var s=i=="acomment"?"acomment-content":"activity-inner";var o=jq("li#"+i+"-"+r+" ."+s+":first");jq(t).addClass("loading");jq.post(ajaxurl,{action:"get_single_activity_content",activity_id:r},function(e){jq(o).slideUp(300).html(e).slideDown(300)});return false});jq("form.ac-form").hide();if(jq(".activity-comments").length)bp_dtheme_hide_comments();jq("div.activity").click(function(e){var t=jq(e.target);if(t.hasClass("acomment-reply")||t.parent().hasClass("acomment-reply")){if(t.parent().hasClass("acomment-reply"))t=t.parent();var n=t.attr("id");ids=n.split("-");var r=ids[2];var i=t.attr("href").substr(10,t.attr("href").length);var s=jq("#ac-form-"+r);s.css("display","none");s.removeClass("root");jq(".ac-form").hide();s.children("div").each(function(){if(jq(this).hasClass("error"))jq(this).hide()});if(ids[1]!="comment"){jq(".activity-comments li#acomment-"+i).append(s)}else{jq("li#activity-"+r+" .activity-comments").append(s)}if(s.parent().hasClass("activity-comments"))s.addClass("root");s.slideDown(400);jq("#ac-form-"+ids[2]+" textarea").focus();return false}if(t.attr("name")=="ac_form_submit"){var s=t.parents("form");var o=s.parent();var u=s.attr("id").split("-");if(!o.hasClass("activity-comments")){var a=o.attr("id").split("-");var f=a[1]}else{var f=u[2]}jq("form#"+s.attr("id")+" div.error").hide();t.addClass("loading").prop("disabled",true);var l={action:"new_activity_comment",cookie:bp_get_cookies(),_wpnonce_new_activity_comment:jq("input#_wpnonce_new_activity_comment").val(),comment_id:f,form_id:u[2],content:jq("form#"+s.attr("id")+" textarea").val()};var c=jq("#_bp_as_nonce_"+f).val();if(c){l["_bp_as_nonce_"+f]=c}jq.post(ajaxurl,l,function(e){t.removeClass("loading");if(e[0]+e[1]=="-1"){s.append(jq(e.substr(2,e.length)).hide().fadeIn(200))}else{var n=s.parent();s.fadeOut(200,function(){if(0==n.children("ul").length){if(n.hasClass("activity-comments")){n.prepend("<ul></ul>")}else{n.append("<ul></ul>")}}var t=jq.trim(e);n.children("ul").append(jq(t).hide().fadeIn(200));s.children("textarea").val("");n.parent().addClass("has-comments")});jq("form#"+s.attr("id")+" textarea").val("");jq("li#activity-"+u[2]+" a.acomment-reply span").html(Number(jq("li#activity-"+u[2]+" a.acomment-reply span").html())+1);var r=n.find(".show-all").find("a");if(r){var i=jq("li#activity-"+u[2]+" a.acomment-reply span").html();r.html(BP_DTheme.show_x_comments.replace("%d",i))}}jq(t).prop("disabled",false)});return false}if(t.hasClass("acomment-delete")){var h=t.attr("href");var p=t.parent().parent();var s=p.parents("div.activity-comments").children("form");var d=h.split("_wpnonce=");d=d[1];var f=h.split("cid=");f=f[1].split("&");f=f[0];t.addClass("loading");jq(".activity-comments ul .error").remove();p.parents(".activity-comments").append(s);jq.post(ajaxurl,{action:"delete_activity_comment",cookie:bp_get_cookies(),_wpnonce:d,id:f},function(e){if(e[0]+e[1]=="-1"){p.prepend(jq(e.substr(2,e.length)).hide().fadeIn(200))}else{var t=jq("li#"+p.attr("id")+" ul").children("li");var n=0;jq(t).each(function(){if(!jq(this).is(":hidden"))n++});p.fadeOut(200,function(){p.remove()});var r=jq("li#"+p.parents("ul#activity-stream > li").attr("id")+" a.acomment-reply span");var i=r.html()-(1+n);r.html(i);var s=p.siblings(".show-all").find("a");if(s){s.html(BP_DTheme.show_x_comments.replace("%d",i))}if(0==i){jq(p.parents("ul#activity-stream > li")).removeClass("has-comments")}}});return false}if(t.hasClass("spam-activity-comment")){var h=t.attr("href");var p=t.parent().parent();t.addClass("loading");jq(".activity-comments ul div.error").remove();p.parents(".activity-comments").append(p.parents(".activity-comments").children("form"));jq.post(ajaxurl,{action:"bp_spam_activity_comment",cookie:encodeURIComponent(document.cookie),_wpnonce:h.split("_wpnonce=")[1],id:h.split("cid=")[1].split("&")[0]},function(e){if(e[0]+e[1]=="-1"){p.prepend(jq(e.substr(2,e.length)).hide().fadeIn(200))}else{var t=jq("li#"+p.attr("id")+" ul").children("li");var n=0;jq(t).each(function(){if(!jq(this).is(":hidden")){n++}});p.fadeOut(200);var r=p.parents("ul#activity-stream > li");jq("li#"+r.attr("id")+" a.acomment-reply span").html(jq("li#"+r.attr("id")+" a.acomment-reply span").html()-(1+n))}});return false}if(t.parent().hasClass("show-all")){t.parent().addClass("loading");setTimeout(function(){t.parent().parent().children("li").fadeIn(200,function(){t.parent().remove()})},600);return false}});jq(document).keydown(function(e){e=e||window.event;if(e.target)element=e.target;else if(e.srcElement)element=e.srcElement;if(element.nodeType==3)element=element.parentNode;if(e.ctrlKey==true||e.altKey==true||e.metaKey==true)return;var t=e.keyCode?e.keyCode:e.which;if(t==27){if(element.tagName=="TEXTAREA"){if(jq(element).hasClass("ac-input"))jq(element).parent().parent().parent().slideUp(200)}}});jq(".dir-search").click(function(e){if(jq(this).hasClass("no-ajax"))return;var t=jq(e.target);if(t.attr("type")=="submit"){var n=jq(".item-list-tabs li.selected").attr("id").split("-");var r=n[0];bp_filter_request(r,jq.cookie("bp-"+r+"-filter"),jq.cookie("bp-"+r+"-scope"),"div."+r,t.parent().children("label").children("input").val(),1,jq.cookie("bp-"+r+"-extras"));return false}});jq("div.item-list-tabs").click(function(e){if(jq(this).hasClass("no-ajax"))return;var t=e.target.nodeName=="SPAN"?e.target.parentNode:e.target;var n=jq(t).parent();if("LI"==n[0].nodeName&&!n.hasClass("last")){var r=n.attr("id").split("-");var i=r[0];if("activity"==i)return false;var s=r[1];var o=jq("#"+i+"-order-select select").val();var u=jq("#"+i+"_search").val();bp_filter_request(i,o,s,"div."+i,u,1,jq.cookie("bp-"+i+"-extras"));return false}});jq("li.filter select").change(function(){if(jq(".item-list-tabs li.selected").length)var e=jq(".item-list-tabs li.selected");else var e=jq(this);var t=e.attr("id").split("-");var n=t[0];var r=t[1];var i=jq(this).val();var s=false;if(jq(".dir-search input").length)s=jq(".dir-search input").val();if("friends"==n)n="members";bp_filter_request(n,i,r,"div."+n,s,1,jq.cookie("bp-"+n+"-extras"));return false});jq("div#content").click(function(e){var t=jq(e.target);if(t.hasClass("button"))return true;if(t.parent().parent().hasClass("pagination")&&!t.parent().parent().hasClass("no-ajax")){if(t.hasClass("dots")||t.hasClass("current"))return false;if(jq(".item-list-tabs li.selected").length)var n=jq(".item-list-tabs li.selected");else var n=jq("li.filter select");var r=1;var i=n.attr("id").split("-");var s=i[0];var o=false;var u=jq(t).closest(".pagination-links").attr("id");if(jq("div.dir-search input").length)o=jq(".dir-search input").val();if(jq(t).hasClass("next"))var r=Number(jq(".pagination span.current").html())+1;else if(jq(t).hasClass("prev"))var r=Number(jq(".pagination span.current").html())-1;else var r=Number(jq(t).html());if(u.indexOf("pag-bottom")!==-1){var a="pag-bottom"}else{var a=null}bp_filter_request(s,jq.cookie("bp-"+s+"-filter"),jq.cookie("bp-"+s+"-scope"),"div."+s,o,r,jq.cookie("bp-"+s+"-extras"),a);return false}});jq("a.show-hide-new").click(function(){if(!jq("#new-topic-post").length)return false;if(jq("#new-topic-post").is(":visible"))jq("#new-topic-post").slideUp(200);else jq("#new-topic-post").slideDown(200,function(){jq("#topic_title").focus()});return false});jq("input#submit_topic_cancel").click(function(){if(!jq("#new-topic-post").length)return false;jq("#new-topic-post").slideUp(200);return false});jq("#forum-directory-tags a").click(function(){bp_filter_request("forums","tags",jq.cookie("bp-forums-scope"),"div.forums",jq(this).html().replace(/&nbsp;/g,"-"),1,jq.cookie("bp-forums-extras"));return false});jq("div#invite-list input").click(function(){jq(".ajax-loader").toggle();var e=jq(this).val();if(jq(this).prop("checked")==true)var t="invite";else var t="uninvite";jq(".item-list-tabs li.selected").addClass("loading");jq.post(ajaxurl,{action:"groups_invite_user",friend_action:t,cookie:bp_get_cookies(),_wpnonce:jq("input#_wpnonce_invite_uninvite_user").val(),friend_id:e,group_id:jq("input#group_id").val()},function(n){if(jq("#message"))jq("#message").hide();jq(".ajax-loader").toggle();if(t=="invite"){jq("#friend-list").append(n)}else if(t=="uninvite"){jq("#friend-list li#uid-"+e).remove()}jq(".item-list-tabs li.selected").removeClass("loading")})});jq("#friend-list").on("click","li a.remove",function(){jq(".ajax-loader").toggle();var e=jq(this).attr("id");e=e.split("-");e=e[1];jq.post(ajaxurl,{action:"groups_invite_user",friend_action:"uninvite",cookie:bp_get_cookies(),_wpnonce:jq("input#_wpnonce_invite_uninvite_user").val(),friend_id:e,group_id:jq("input#group_id").val()},function(t){jq(".ajax-loader").toggle();jq("#friend-list li#uid-"+e).remove();jq("#invite-list input#f-"+e).prop("checked",false)});return false});jq(".field-visibility-settings").hide();jq(".visibility-toggle-link").on("click",function(){var e=jq(this).parent();jq(e).fadeOut(600,function(){jq(e).siblings(".field-visibility-settings").slideDown(400)});return false});jq(".field-visibility-settings-close").on("click",function(){var e=jq(this).parent();jq(e).slideUp(400,function(){jq(e).siblings(".field-visibility-settings-toggle").fadeIn(800)});return false});jq("#profile-edit-form input:not(:submit), #profile-edit-form textarea, #profile-edit-form select, #signup_form input:not(:submit), #signup_form textarea, #signup_form select").change(function(){var e=true;jq("#profile-edit-form input:submit, #signup_form input:submit").on("click",function(){e=false});window.onbeforeunload=function(t){if(e){return BP_DTheme.unsaved_changes}}});jq("ul#friend-list a.accept, ul#friend-list a.reject").click(function(){var e=jq(this);var t=jq(this).parents("ul#friend-list li");var n=jq(this).parents("li div.action");var r=t.attr("id").substr(11,t.attr("id").length);var i=e.attr("href");var s=i.split("_wpnonce=");s=s[1];if(jq(this).hasClass("accepted")||jq(this).hasClass("rejected"))return false;if(jq(this).hasClass("accept")){var o="accept_friendship";n.children("a.reject").css("visibility","hidden")}else{var o="reject_friendship";n.children("a.accept").css("visibility","hidden")}e.addClass("loading");jq.post(ajaxurl,{action:o,cookie:bp_get_cookies(),id:r,_wpnonce:s},function(r){e.removeClass("loading");if(r[0]+r[1]=="-1"){t.prepend(r.substr(2,r.length));t.children("div#message").hide().fadeIn(200)}else{e.fadeOut(100,function(){if(jq(this).hasClass("accept")){n.children("a.reject").hide();jq(this).html(BP_DTheme.accepted).contents().unwrap()}else{n.children("a.accept").hide();jq(this).html(BP_DTheme.rejected).contents().unwrap()}})}});return false});jq("#members-dir-list").on("click",".friendship-button a",function(){jq(this).parent().addClass("loading");var e=jq(this).attr("id");e=e.split("-");e=e[1];var t=jq(this).attr("href");t=t.split("?_wpnonce=");t=t[1].split("&");t=t[0];var n=jq(this);jq.post(ajaxurl,{action:"addremove_friend",cookie:bp_get_cookies(),fid:e,_wpnonce:t},function(e){var t=n.attr("rel");var r=n.parent();if(t=="add"){jq(r).fadeOut(200,function(){r.removeClass("add_friend");r.removeClass("loading");r.addClass("pending_friend");r.fadeIn(200).html(e)})}else if(t=="remove"){jq(r).fadeOut(200,function(){r.removeClass("remove_friend");r.removeClass("loading");r.addClass("add");r.fadeIn(200).html(e)})}});return false});jq("#groups-dir-list").on("click",".group-button a",function(){var e=jq(this).parent().attr("id");e=e.split("-");e=e[1];var t=jq(this).attr("href");t=t.split("?_wpnonce=");t=t[1].split("&");t=t[0];var n=jq(this);jq.post(ajaxurl,{action:"joinleave_group",cookie:bp_get_cookies(),gid:e,_wpnonce:t},function(e){var t=n.parent();if(!jq("body.directory").length){location.href=location.href}else{jq(t).fadeOut(200,function(){t.fadeIn(200).html(e);var r=jq("#groups-personal span");var i=1;if(n.hasClass("leave-group")){if(t.hasClass("hidden")){t.closest("li").slideUp(200)}i=0}else if(n.hasClass("request-membership")){i=false}if(i!==false&&r.length){if(i){r.text((r.text()>>0)+1)}else{r.text((r.text()>>0)-1)}}})}});return false});jq(".pending").click(function(){return false});jq(".message-search").click(function(e){if(jq(this).hasClass("no-ajax"))return;var t=jq(e.target);if(t.attr("type")=="submit"){var n="messages";bp_filter_request(n,jq.cookie("bp-"+n+"-filter"),jq.cookie("bp-"+n+"-scope"),"div."+n,t.parent().children("label").children("input").val(),1,jq.cookie("bp-"+n+"-extras"));return false}});jq("input#send_reply_button").click(function(){var e=jq("#messages_order").val()||"ASC",t=jq("#message-recipients").offset();var n=jq("input#send_reply_button");jq(n).addClass("loading");jq.post(ajaxurl,{action:"messages_send_reply",cookie:bp_get_cookies(),_wpnonce:jq("input#send_message_nonce").val(),content:jq("#message_content").val(),send_to:jq("input#send_to").val(),subject:jq("input#subject").val(),thread_id:jq("input#thread_id").val()},function(r){if(r[0]+r[1]=="-1"){jq("form#send-reply").prepend(r.substr(2,r.length))}else{jq("form#send-reply div#message").remove();jq("#message_content").val("");if("ASC"==e){jq("form#send-reply").before(r)}else{jq("#message-recipients").after(r);jq(window).scrollTop(t.top)}jq(".new-message").hide().slideDown(200,function(){jq(".new-message").removeClass("new-message")})}jq(n).removeClass("loading")});return false});jq("a#mark_as_read, a#mark_as_unread").click(function(){var e="";var t=jq("#message-threads tr td input[type='checkbox']");if("mark_as_unread"==jq(this).attr("id")){var n="read";var r="unread";var i=1;var s=0;var o="inline";var u="messages_markunread"}else{var n="unread";var r="read";var i=0;var s=1;var o="none";var u="messages_markread"}t.each(function(s){if(jq(this).is(":checked")){if(jq("tr#m-"+jq(this).attr("value")).hasClass(n)){e+=jq(this).attr("value");jq("tr#m-"+jq(this).attr("value")).removeClass(n);jq("tr#m-"+jq(this).attr("value")).addClass(r);var u=jq("tr#m-"+jq(this).attr("value")+" td span.unread-count").html();jq("tr#m-"+jq(this).attr("value")+" td span.unread-count").html(i);jq("tr#m-"+jq(this).attr("value")+" td span.unread-count").css("display",o);var a=jq("tr.unread").length;jq("a#user-messages span").html(a);if(s!=t.length-1){e+=","}}}});jq.post(ajaxurl,{action:u,thread_ids:e});return false});jq("body.messages #item-body div.messages").on("change","#message-type-select",function(){var e=this.value;var t=jq("td input[type='checkbox']");t.each(function(e){t[e].checked=""});var n="checked";switch(e){case"unread":t=jq("tr.unread td input[type='checkbox']");break;case"read":t=jq("tr.read td input[type='checkbox']");break;case"":n="";break}t.each(function(e){t[e].checked=n})});jq("body.messages #item-body div.messages").on("click",".messages-options-nav a",function(){if(-1==jq.inArray(this.id),Array("delete_sentbox_messages","delete_inbox_messages")){return}checkboxes_tosend="";checkboxes=jq("#message-threads tr td input[type='checkbox']");jq("#message").remove();jq(this).addClass("loading");jq(checkboxes).each(function(e){if(jq(this).is(":checked"))checkboxes_tosend+=jq(this).attr("value")+","});if(""==checkboxes_tosend){jq(this).removeClass("loading");return false}jq.post(ajaxurl,{action:"messages_delete",thread_ids:checkboxes_tosend},function(e){if(e[0]+e[1]=="-1"){jq("#message-threads").prepend(e.substr(2,e.length))}else{jq("#message-threads").before('<div id="message" class="updated"><p>'+e+"</p></div>");jq(checkboxes).each(function(e){if(jq(this).is(":checked")){jq(this).attr("checked",false);jq(this).parent().parent().fadeOut(150)}})}jq("#message").hide().slideDown(150);jq("#delete_inbox_messages, #delete_sentbox_messages").removeClass("loading")});return false});jq("a#close-notice").click(function(){jq(this).addClass("loading");jq("div#sidebar div.error").remove();jq.post(ajaxurl,{action:"messages_close_notice",notice_id:jq(".notice").attr("rel").substr(2,jq(".notice").attr("rel").length)},function(e){jq("a#close-notice").removeClass("loading");if(e[0]+e[1]=="-1"){jq(".notice").prepend(e.substr(2,e.length));jq("div#sidebar div.error").hide().fadeIn(200)}else{jq(".notice").slideUp(100)}});return false});jq("#wp-admin-bar ul.main-nav li, #nav li").mouseover(function(){jq(this).addClass("sfhover")});jq("#wp-admin-bar ul.main-nav li, #nav li").mouseout(function(){jq(this).removeClass("sfhover")});jq("a.logout").click(function(){jq.removeCookie("bp-activity-scope",{path:"/"});jq.removeCookie("bp-activity-filter",{path:"/"});jq.removeCookie("bp-activity-oldestpage",{path:"/"});var e=["members","groups","blogs","forums"];jq(e).each(function(t){jq.removeCookie("bp-"+e[t]+"-scope",{path:"/"});jq.removeCookie("bp-"+e[t]+"-filter",{path:"/"});jq.removeCookie("bp-"+e[t]+"-extras",{path:"/"})})})})